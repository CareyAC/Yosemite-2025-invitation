<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camping Trip Invitation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            color: #333;
            text-align: center;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px 0;
        }
        h1 {
            font-size: 2.5rem;
            margin: 0;
        }
        .content {
            margin-top: 50px;
        }
        .graphic {
            width: 100%;
            max-width: 600px;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            font-size: 1.2rem;
            margin-top: 30px;
            display: inline-block;
        }
        .button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <header>
        <h1>You're Invited to a Yosemite Camping Trip!</h1>
    </header>
    <div class="content">
        <p> SAVE THE DATE!! Yosemite National Park 2025 Camping Trip.</p>
        <p> Thursday, 6/12/25 to Sunday, 6/15/25.</p>
        <p> Group Campsite A, Hodgdon Meadow Campground</p>
        <p>Weâ€™ll be camping, hiking, and enjoying nature with great company!</p>
        <img src="NEW Gemini_Generated_Image_cl8wdicl8wdicl8w.jpeg" alt="Cartoon Camping Graphic">
    </div>
    
    <!-- ðŸ”¹ START of RSVP System -->
    <h2>Guest List</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody id="guest-list"></tbody>
    </table>

    <h2>Submit Your RSVP</h2>
    <form id="rsvp-form">
        <label for="guest-name">Select Your Name:</label>
        <select id="guest-name"></select>
        <br><br>
        <label>
            <input type="radio" name="rsvp" value="Attending"> Attending
        </label>
        <label>
            <input type="radio" name="rsvp" value="Not Attending"> Not Attending
        </label>
        <br><br>
        <button type="submit">Submit</button>
    </form>
    <!-- ðŸ”¹ END of RSVP System -->

    <script>
        async function loadGuests() {
            const response = await fetch("https://script.google.com/macros/s/AKfycbwuYOCdbAGYI4aDvNTFctsxzoyROWiH4Une0xXjDIsVjmtxXvxlc5Eq_2vPsRyM1eVA/exec?getGuests=true");
            const guests = await response.json();
            const guestList = document.getElementById('guest-list');
            const guestSelect = document.getElementById('guest-name');
            
            guestList.innerHTML = '';
            guestSelect.innerHTML = '<option value="">--Select Your Name--</option>';
            
            guests.forEach(guest => {
                let row = `<tr><td>${guest.name}</td><td>${guest.status}</td></tr>`;
                guestList.innerHTML += row;
                
                let option = `<option value="${guest.name}">${guest.name}</option>`;
                guestSelect.innerHTML += option;
            });
        }
        
   document.getElementById('rsvp-form').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    let name = document.getElementById('guest-name').value;
    let status = document.querySelector('input[name="rsvp"]:checked');
    
    if (!name || !status) {
        alert("Please select your name and RSVP status.");
        return;
    }
    
    let response = await fetch("https://script.google.com/macros/s/AKfycbwuYOCdbAGYI4aDvNTFctsxzoyROWiH4Une0xXjDIsVjmtxXvxlc5Eq_2vPsRyM1eVA/exec", {  // ðŸ”¹ Replace with your actual URL
        method: "POST",
        body: JSON.stringify({ name: name, status: status.value }),
        headers: { "Content-Type": "application/json" }
    });

if (response.ok) {
    alert("RSVP recorded successfully! Your response has been saved.");
    loadGuests();  // ðŸ”¹ This refreshes the guest list
    } else {
        alert("Error submitting RSVP. Please try again.");
    }
});
        
        loadGuests();
    </script>
</body>
</html>
